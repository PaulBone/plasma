name: CI

on: [push, pull_request]

jobs:
  test:
    name: Test (${{ matrix.c }})
    runs-on: ubuntu-latest
    strategy:
      matrix:
        c: [gcc, clang]
      fail-fast: false

    steps:
    - name: checkout
      uses: actions/checkout@v2
    - name: build
      uses: PlasmaLang/ci/rotd@master
      with:
        makeTarget: progs
        c: ${{ matrix.c }} 
    - name: test
      uses: PlasmaLang/ci/rotd@master
      with:
        makeTarget: test
        c: ${{ matrix.c }} 
    - name: extra
      uses: PlasmaLang/ci/rotd@master
      with:
        makeTarget: tags
        c: ${{ matrix.c }} 

